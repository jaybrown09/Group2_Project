/* === DARK THEME === */

/* Force background on multiple Streamlit containers */
.stApp,
[data-testid="stAppViewContainer"],
[data-testid="stMain"],
.main,
.main > div {
    background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%) !important;
    color: #f8fafc !important;
}

/* Card-like containers */
.settings-section {
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(16px);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 20px;
    padding: 2rem;
    margin: 1.5rem 0;
}

/* Titles and labels */
.section-title { color: #f8fafc; font-weight: 700; font-size: 1.5rem; }
.section-description { color: #94a3b8; }

.profile-label { color: #94a3b8; }
.profile-value { color: #f8fafc; }

label { color: #e2e8f0 !important; font-weight: 600; }

.stat-number { color: #f97316; }
.stat-label { color: #94a3b8; }

.info-box { background: rgba(59,130,246,0.15); border:1px solid rgba(59,130,246,0.3); color:#93c5fd; }
.warning-box { background: rgba(239,68,68,0.15); border:1px solid rgba(239,68,68,0.3); color:#fca5a5; }
.success-box { background: rgba(34,197,94,0.15); border:1px solid rgba(34,197,94,0.3); color:#86efac; }

/* ========== BUTTON FIXES ========== */
/* Base button styling - multiple selectors for maximum coverage */
.stButton > button,
.stButton button,
button[data-testid="baseButton-secondary"],
button[data-testid="baseButton-minimal"],
[data-testid="stButton"] > button,
div[data-testid="column"] .stButton > button,
.element-container .stButton > button {
    background: rgba(255, 255, 255, 0.1) !important;
    color: #f8fafc !important;
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
    border-radius: 12px !important;
    font-weight: 600 !important;
    transition: all 0.2s ease !important;
}

.stButton > button:hover,
.stButton button:hover,
button[data-testid="baseButton-secondary"]:hover,
button[data-testid="baseButton-minimal"]:hover,
[data-testid="stButton"] > button:hover,
div[data-testid="column"] .stButton > button:hover {
    background: rgba(255, 255, 255, 0.15) !important;
    border-color: rgba(255, 255, 255, 0.3) !important;
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3) !important;
}

/* Primary buttons (Add to Plan, etc.) */
.stButton > button[kind="primary"],
button[data-testid="baseButton-primary"],
[data-testid="stButton"] > button[kind="primary"] {
    background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%) !important;
    color: white !important;
    border: 1px solid rgba(59, 130, 246, 0.4) !important;
}

.stButton > button[kind="primary"]:hover,
button[data-testid="baseButton-primary"]:hover {
    background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%) !important;
    border-color: rgba(37, 99, 235, 0.5) !important;
}

/* Secondary/danger buttons */
.stButton > button[kind="secondary"],
button[data-testid="baseButton-secondary"] {
    background: rgba(239, 68, 68, 0.15) !important;
    color: #fca5a5 !important;
    border: 1px solid rgba(239, 68, 68, 0.3) !important;
}

.stButton > button[kind="secondary"]:hover,
button[data-testid="baseButton-secondary"]:hover {
    background: rgba(239, 68, 68, 0.25) !important;
    border-color: rgba(239, 68, 68, 0.4) !important;
}

/* Override any Streamlit default dark background on buttons */
.stButton > button[style*="background"],
button[class*="st-emotion-cache"] {
    background: rgba(255, 255, 255, 0.1) !important;
}

/* Ensure emoji/icon buttons are visible */
.stButton > button:has(span),
.stButton > button:has(p) {
    background: rgba(255, 255, 255, 0.1) !important;
    color: #f8fafc !important;
}

/* Number input +/- buttons - applies to ALL pages */
.stNumberInput button {
    background: rgba(30, 41, 59, 1.0) !important;
    color: #94a3b8 !important;
}

.stNumberInput button:hover {
    background: rgba(100, 116, 139, 0.25) !important;
    color: #f8fafc !important;
}

/* MultiSelect Padding */
[data-testid="stMultiSelect"] > div > div {
    background: rgba(30, 41, 59, 1.0) !important;
}

/* Fix Padding Color */
[data-baseweb="input"],
[data-baseweb="base-input"],
[data-baseweb="input"] > div,
div[role="presentation"][class*="st-"] {
    background: rgba(30, 41, 59, 1.0) !important;
}

/* Selectbox specific fixes */
.stSelectbox > div > div > div {
    background: rgba(30, 41, 59, 1.0) !important;
}

/* The select container itself */
.stSelectbox [data-baseweb="select"] > div {
    background: rgba(30, 41, 59, 1.0) !important;
}

/* Selectbox dropdown arrow icon - ensure visibility */
.stSelectbox svg path,
.stSelectbox svg[data-baseweb="icon"] path {
    fill: #f8fafc !important;
}

/* Input fields */
.stTextInput > div > div > input,
.stSelectbox > div > div > div,
.stTextArea > div > div > textarea {
    background: rgba(30, 41, 59, 1.0) !important;
    color: #f8fafc !important;
}

.stTextInput > div > div > input:focus,
.stSelectbox > div > div > div:focus,
.stTextArea > div > div > textarea:focus {
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2) !important;
}

/* Pantry card styling */
.pantry-card {
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(16px);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 16px;
    padding: 1.5rem;
    margin-bottom: 1rem;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
    transition: all 0.2s ease;
}

.pantry-card:hover {
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
    transform: translateY(-2px);
    background: rgba(255, 255, 255, 0.1);
}

.item-name {
    color: #f8fafc;
    font-size: 1.25rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
}

.item-quantity,
.item-date {
    color: #94a3b8;
    font-size: 0.95rem;
    margin: 0.25rem 0;
}

/* Status badges */
.status-badge {
    display: inline-block;
    padding: 0.35rem 0.75rem;
    border-radius: 8px;
    font-size: 0.85rem;
    font-weight: 600;
    margin: 0.5rem 0.25rem 0 0;
}

.status-expired {
    background: rgba(239, 68, 68, 0.2);
    color: #fca5a5;
    border: 1px solid rgba(239, 68, 68, 0.4);
}

.status-expiring {
    background: rgba(251, 191, 36, 0.2);
    color: #fcd34d;
    border: 1px solid rgba(251, 191, 36, 0.4);
}

.status-low {
    background: rgba(59, 130, 246, 0.2);
    color: #93c5fd;
    border: 1px solid rgba(59, 130, 246, 0.4);
}

.status-good {
    background: rgba(34, 197, 94, 0.2);
    color: #86efac;
    border: 1px solid rgba(34, 197, 94, 0.4);
}

/* Dividers */
.settings-divider {
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    margin: 2rem 0;
}

/* Stats grid */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 1rem;
    margin-top: 1.5rem;
}

.stat-card {
    background: rgba(59, 130, 246, 0.1);
    border: 1px solid rgba(59, 130, 246, 0.3);
    border-radius: 12px;
    padding: 1.5rem;
    text-align: center;
}

/* Profile info */
.profile-info {
    margin: 1.5rem 0;
}

.profile-row {
    display: flex;
    justify-content: space-between;
    padding: 0.75rem 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.profile-row:last-child {
    border-bottom: none;
}

/* Remove any leftover Streamlit background tint */
[data-testid="stAppViewContainer"] {
    background: transparent !important;
}

/* Calendar/Meal Plan specific styles */
.week-display {
    text-align: center;
    font-size: 1.2rem;
    font-weight: 600;
    color: #f8fafc;
    padding: 0.5rem;
}

.day-card {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    padding: 1rem;
    min-height: 200px;
}

.day-card.today {
    border-color: #3b82f6;
    background: rgba(59, 130, 246, 0.1);
}

.day-header {
    color: #94a3b8;
    font-size: 0.9rem;
    font-weight: 600;
    text-transform: uppercase;
}

.day-date {
    color: #f8fafc;
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
}

.meal-entry {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 8px;
    padding: 0.5rem;
    margin-bottom: 0.5rem;
}

.meal-type {
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    margin-bottom: 0.25rem;
}

.meal-type.Breakfast { color: #fbbf24; }
.meal-type.Lunch { color: #34d399; }
.meal-type.Dinner { color: #f87171; }
.meal-type.Snack { color: #a78bfa; }

.meal-title {
    color: #f8fafc;
    font-size: 0.9rem;
}

.empty-day {
    color: #64748b;
    font-size: 0.85rem;
    font-style: italic;
    padding: 1rem 0;
}

.date-title {
    color: #f8fafc;
    font-size: 1.2rem;
    font-weight: 700;
    margin-bottom: 1rem;
}

.list-view-container {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    padding: 1.5rem;
}

/* Remove border/outline for preferences form submit button */
[data-testid="stFormSubmitButton"],
[data-testid="stFormSubmitButton"] button {
    border: none !important;
    border-color: transparent !important;
    outline: none !important;
    box-shadow: none !important;
}

/* Form sumbit highlight */
[data-testid="stFormSubmitButton"] button:hover {
    filter: brightness(0.85) !important;
}

/* Hide click enter text */
div[data-testid="InputInstructions"] {
    display: none;
}

/* Caret color in text boxes */
textarea,
input[type="text"],
input[type="email"],
input[type="password"],
input[type="search"],
input[type="url"],
input[type="tel"],
input[type="number"],
input:not([type]) {
    caret-color: #f8fafc !important;
}

/* Toolbar Styling */
[data-testid="stToolbar"],
.stApp header[data-testid="stHeader"],
header[data-testid="stHeader"] {
    background: rgba(15, 23, 42, 0.95) !important;
    backdrop-filter: blur(10px);
}

/* Toolbar buttons */
[data-testid="stToolbar"] button,
header[data-testid="stHeader"] button {
    color: #f8fafc !important;
}

[data-testid="stToolbar"] button:hover,
header[data-testid="stHeader"] button:hover {
    background: rgba(255, 255, 255, 0.1) !important;
}

/* Sidebar Styling */
[data-testid="stSidebar"],
[data-testid="stSidebarContent"],
section[data-testid="stSidebar"] {
    background: rgba(15, 23, 42, 0.95) !important;
    backdrop-filter: blur(10px);
}

/* Sidebar background overlay */
[data-testid="stSidebar"] > div:first-child {
    background: rgba(15, 23, 42, 0.95) !important;
    backdrop-filter: blur(10px);
}

/* Sidebar text - Make it light/readable */
[data-testid="stSidebar"] *,
[data-testid="stSidebar"] p,
[data-testid="stSidebar"] span,
[data-testid="stSidebar"] label,
[data-testid="stSidebar"] [data-testid="stMarkdownContainer"] {
    color: #f8fafc !important;
}

/* Sidebar links/buttons */
[data-testid="stSidebar"] button,
[data-testid="stSidebar"] a {
    color: #f8fafc !important;
}

[data-testid="stSidebar"] button:hover,
[data-testid="stSidebar"] a:hover {
    background: rgba(255, 255, 255, 0.1) !important;
}

/* Sidebar collapse button */
[data-testid="collapsedControl"],
button[data-testid="collapsedControl"] {
    background: rgba(15, 23, 42, 0.95) !important;
    backdrop-filter: blur(10px);
    color: #f8fafc !important;
}

[data-testid="collapsedControl"]:hover,
button[data-testid="collapsedControl"]:hover {
    background: rgba(255, 255, 255, 0.15) !important;
}

/* Target the Material Icon specifically */
[data-testid="collapsedControl"] span[data-testid="stIconMaterial"],
button[data-testid="collapsedControl"] span[data-testid="stIconMaterial"],
span[data-testid="stIconMaterial"],
[data-testid="stIconMaterial"][color] {
    color: #f8fafc !important;
    fill: #f8fafc !important;
}

/* Also target any other child elements */
[data-testid="collapsedControl"] *,
button[data-testid="collapsedControl"] * {
    color: #f8fafc !important;
    fill: #f8fafc !important;
}

/* Tab styling */
[data-testid="stTab"] {
    color: #f8fafc !important;
    font-weight: 600 !important;
}

/* Selected/active tab */
[data-testid="stTab"][aria-selected="true"] {
    color: #3b82f6 !important;
    border-bottom: 2px solid #3b82f6 !important;
}

/* Tab hover state */
[data-testid="stTab"]:hover {
    background: rgba(255, 255, 255, 0.1) !important;
    color: #f8fafc !important;
}

/* Tab text container */
[data-testid="stTab"] [data-testid="stMarkdownContainer"] p {
    color: inherit !important;
    margin: 0 !important;
}

/* Expander styling - prevent white background when expanded */
[data-testid="stExpander"],
details[data-testid="stExpander"],
.streamlit-expanderHeader,
[data-testid="stExpanderDetails"] {
    background: rgba(30, 41, 59, 0.6) !important;
    border: 1px solid rgba(255, 255, 255, 0.15) !important;
}

/* Expander header (the clickable part) */
[data-testid="stExpander"] summary,
details[data-testid="stExpander"] summary,
.streamlit-expanderHeader {
    background: rgba(30, 41, 59, 0.6) !important;
    color: #f8fafc !important;
    border-radius: 12px !important;
}

/* Expander header on hover */
[data-testid="stExpander"] summary:hover,
details[data-testid="stExpander"] summary:hover {
    background: rgba(255, 255, 255, 0.1) !important;
}

/* Expander content area when expanded */
[data-testid="stExpander"][open],
details[data-testid="stExpander"][open] {
    background: rgba(30, 41, 59, 0.6) !important;
}

/* Expander details content */
[data-testid="stExpanderDetails"],
details[data-testid="stExpander"] > div {
    background: transparent !important;
}

/* Keep expander icon visible */
[data-testid="stExpander"] svg,
details[data-testid="stExpander"] svg {
    color: #f8fafc !important;
    fill: #f8fafc !important;
}

/* Number Input color */
input[type="number"] {
  color: #f8fafc;
}

/* Checkbox text color*/
.stCheckbox p {
  color: #f8fafc !important;
}

/* Radio button label color */
.stRadio p {
  color: #f8fafc !important;
}

/* Metric value color */
[data-testid="stMetricValue"] {
    color: #f8fafc !important;
}

/* Dropdown Color */
[role="option"] {
        color: #f8fafc !important;
        background-color: rgba(30, 41, 59, 1.0) !important;
    }

[role="option"]:hover {
    background-color: #3b82f6 !important;
}

/* File Uploader Background */
[data-testid="stFileUploaderDropzone"] {
    background-color: rgba(30, 41, 59, 1.0) !important;
}

/* File Uploader Instruction Color */
[data-testid="stFileUploaderDropzoneInstructions"] span {
    color: #f8fafc !important;
}

/* Target the upload button */
[data-testid="stFileUploader"] button {
    color: #f8fafc !important;
    background-color: rgba(30, 41, 59, 1.0) !important;
}

/* Date input - all states */
input[type="date"],
.stDateInput input,
[data-baseweb="input"] input[type="date"],
div[data-testid="stDateInput"] input {
    color: #f8fafc !important;
    -webkit-text-fill-color: #f8fafc !important;
    background: rgba(30, 41, 59, 1.0) !important;
}

/* Date input wrapper */
.stDateInput > div > div,
[data-testid="stDateInput"] > div > div {
    background: rgba(30, 41, 59, 1.0) !important;
}

/* Calendar icon */
input[type="date"]::-webkit-calendar-picker-indicator {
    filter: invert(1) brightness(1.5);
    cursor: pointer;
}

/* Calendar Coloring */
[role="grid"] {
        color: #f8fafc !important;
        background-color: rgba(30, 41, 59, 1.0) !important;
    }

[role="gridcell"] {
        color: #f8fafc !important;
        background-color: rgba(30, 41, 59, 1.0) !important;
    }

/* Target all divs inside calendar */
[data-baseweb="calendar"] {
    background-color: #1e293b !important;
    color: #f8fafc !important;
}
    
[data-baseweb="calendar"] button {
    background-color: #1e293b !important;
    color: #f8fafc !important;
}
    
[data-baseweb="calendar"] [aria-selected="true"] {
    background-color: #3b82f6 !important;
}

[data-baseweb="calendar"] div {
        background-color: #1e293b !important;
    }

/* Keep only red circle on selected date */
[data-baseweb="calendar"] [aria-selected="true"]::before {
    background-color: #1e293b !important;
}
    
[data-baseweb="calendar"] [aria-selected="true"]::after {
    background-color: #1e293b !important;
    border: 2px solid #ef4444 !important;
}